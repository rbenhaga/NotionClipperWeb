{
  "annotations": { "list": [] },
  "description": "Real-time monitoring of Notion API reliability, rate limits, and write queue health",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "panels": [
    {
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 0 },
      "id": 100,
      "options": {
        "code": { "language": "plaintext", "showLineNumbers": false },
        "content": "# üöÄ Clipper Pro - Notion Reliability Dashboard\n\nReal-time monitoring of API health, rate limits, and write queue status.",
        "mode": "markdown"
      },
      "pluginVersion": "11.2.0",
      "title": "",
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Number of Notion tokens currently in cooldown due to rate limiting",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [{ "options": { "0": { "color": "green", "index": 0, "text": "‚úì All Clear" } }, "type": "value" }],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#73BF69", "value": null }, { "color": "#FADE2A", "value": 1 }, { "color": "#F2495C", "value": 3 }] },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": { "h": 5, "w": 6, "x": 0, "y": 2 },
      "id": 1,
      "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false }, "showPercentChange": false, "textMode": "auto", "wideLayout": true },
      "pluginVersion": "11.2.0",
      "targets": [{ "expr": "notion_cooldown_active_count", "refId": "A" }],
      "title": "‚è∏Ô∏è Cooldown Active",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Number of circuit breakers in OPEN state (blocking requests)",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [{ "options": { "0": { "color": "green", "index": 0, "text": "‚úì All Closed" } }, "type": "value" }],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#73BF69", "value": null }, { "color": "#F2495C", "value": 1 }] },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": { "h": 5, "w": 6, "x": 6, "y": 2 },
      "id": 2,
      "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false }, "showPercentChange": false, "textMode": "auto", "wideLayout": true },
      "pluginVersion": "11.2.0",
      "targets": [{ "expr": "notion_circuit_open_count", "refId": "A" }],
      "title": "üî¥ Circuit Breakers",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Current number of in-flight requests to Notion API (max: 50)",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "max": 50,
          "min": 0,
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#73BF69", "value": null }, { "color": "#FADE2A", "value": 30 }, { "color": "#FF9830", "value": 40 }, { "color": "#F2495C", "value": 48 }] },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": { "h": 5, "w": 6, "x": 12, "y": 2 },
      "id": 3,
      "options": { "minVizHeight": 75, "minVizWidth": 75, "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true, "sizing": "auto" },
      "pluginVersion": "11.2.0",
      "targets": [{ "expr": "notion_inflight_requests", "refId": "A" }],
      "title": "üîÑ In-Flight Requests",
      "type": "gauge"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Jobs waiting to be processed in the write queue",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [{ "options": { "0": { "color": "green", "index": 0, "text": "‚úì Empty" } }, "type": "value" }],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#73BF69", "value": null }, { "color": "#FADE2A", "value": 5 }, { "color": "#FF9830", "value": 20 }, { "color": "#F2495C", "value": 50 }] },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": { "h": 5, "w": 6, "x": 18, "y": 2 },
      "id": 4,
      "options": { "colorMode": "background", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false }, "showPercentChange": false, "textMode": "auto", "wideLayout": true },
      "pluginVersion": "11.2.0",
      "targets": [{ "expr": "notion_queue_depth_queued", "refId": "A" }],
      "title": "üì• Queue Depth",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Jobs currently being processed",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#5794F2", "value": null }] },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": { "h": 3, "w": 4, "x": 0, "y": 7 },
      "id": 10,
      "options": { "colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false }, "showPercentChange": false, "textMode": "auto", "wideLayout": true },
      "pluginVersion": "11.2.0",
      "targets": [{ "expr": "notion_queue_depth_running", "refId": "A" }],
      "title": "‚ö° Running",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Jobs that failed after max retries",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [{ "options": { "0": { "color": "green", "index": 0, "text": "‚úì None" } }, "type": "value" }],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#73BF69", "value": null }, { "color": "#F2495C", "value": 1 }] },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": { "h": 3, "w": 4, "x": 4, "y": 7 },
      "id": 11,
      "options": { "colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false }, "showPercentChange": false, "textMode": "auto", "wideLayout": true },
      "pluginVersion": "11.2.0",
      "targets": [{ "expr": "notion_queue_depth_failed", "refId": "A" }],
      "title": "‚ùå Failed",
      "type": "stat"
    },
    {
      "gridPos": { "h": 3, "w": 16, "x": 8, "y": 7 },
      "id": 101,
      "options": {
        "code": { "language": "plaintext", "showLineNumbers": false },
        "content": "### System Status\n\n| Metric | Healthy | Warning | Critical |\n|--------|---------|---------|----------|\n| Cooldown | 0 | 1-2 | 3+ |\n| Circuit | All Closed | - | Any Open |\n| In-Flight | <30 | 30-45 | >45 |\n| Queue | <5 | 5-20 | >50 |",
        "mode": "markdown"
      },
      "pluginVersion": "11.2.0",
      "title": "",
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Historical view of rate limit protection mechanisms",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 20, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "Cooldown" }, "properties": [{ "id": "color", "value": { "fixedColor": "#FADE2A", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "Circuit Open" }, "properties": [{ "id": "color", "value": { "fixedColor": "#F2495C", "mode": "fixed" } }] }
        ]
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 10 },
      "id": 5,
      "options": { "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "desc" } },
      "targets": [
        { "expr": "notion_cooldown_active_count", "legendFormat": "Cooldown", "refId": "A" },
        { "expr": "notion_circuit_open_count", "legendFormat": "Circuit Open", "refId": "B" }
      ],
      "title": "üõ°Ô∏è Rate Limit Protection",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Write queue job states over time",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 20, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "Queued" }, "properties": [{ "id": "color", "value": { "fixedColor": "#5794F2", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "Running" }, "properties": [{ "id": "color", "value": { "fixedColor": "#73BF69", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "Failed" }, "properties": [{ "id": "color", "value": { "fixedColor": "#F2495C", "mode": "fixed" } }] }
        ]
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 10 },
      "id": 6,
      "options": { "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "desc" } },
      "targets": [
        { "expr": "notion_queue_depth_queued", "legendFormat": "Queued", "refId": "A" },
        { "expr": "notion_queue_depth_running", "legendFormat": "Running", "refId": "B" },
        { "expr": "notion_queue_depth_failed", "legendFormat": "Failed", "refId": "C" }
      ],
      "title": "üìä Write Queue Status",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "description": "Concurrent requests to Notion API - backpressure indicator",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 30, "gradientMode": "scheme", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "area" } },
          "mappings": [],
          "max": 50,
          "min": 0,
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#73BF69", "value": null }, { "color": "#FADE2A", "value": 30 }, { "color": "#FF9830", "value": 40 }, { "color": "#F2495C", "value": 48 }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "In-Flight" }, "properties": [{ "id": "color", "value": { "fixedColor": "#8AB8FF", "mode": "fixed" } }] }
        ]
      },
      "gridPos": { "h": 7, "w": 24, "x": 0, "y": 18 },
      "id": 7,
      "options": { "legend": { "calcs": ["mean", "max", "last"], "displayMode": "table", "placement": "right", "showLegend": true }, "tooltip": { "mode": "single", "sort": "none" } },
      "targets": [{ "expr": "notion_inflight_requests", "legendFormat": "In-Flight", "refId": "A" }],
      "title": "üîÑ Backpressure Monitor (In-Flight Requests)",
      "type": "timeseries"
    }
  ],
  "refresh": "10s",
  "schemaVersion": 39,
  "tags": ["notion", "reliability", "p0", "clipper-pro"],
  "templating": { "list": [] },
  "time": { "from": "now-1h", "to": "now" },
  "timepicker": { "refresh_intervals": ["5s", "10s", "30s", "1m", "5m"] },
  "timezone": "browser",
  "title": "üöÄ Clipper Pro - Notion Reliability",
  "uid": "notion-reliability",
  "version": 2,
  "weekStart": ""
}
